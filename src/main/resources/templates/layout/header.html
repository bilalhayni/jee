<!-- src/main/resources/templates/layout/header.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<header th:fragment="header" class="bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-50">
    <h1 class="text-lg font-semibold text-gray-900" th:text="${pageTitle} ?: 'Dashboard'">Dashboard</h1>
    
    <div class="flex items-center gap-4">
        <!-- Search -->
        <div class="flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg bg-white w-60">
            <i class="fas fa-search text-gray-400"></i>
            <input type="text" placeholder="Search..." class="border-none outline-none w-full text-sm bg-transparent">
        </div>
        
        <!-- Notifications -->
        <button class="w-9 h-9 flex items-center justify-center rounded-lg border border-gray-200 hover:bg-gray-50">
            <i class="fas fa-bell text-gray-500"></i>
        </button>
        
        <!-- User Dropdown -->
        <div class="relative" x-data="{ open: false }">
            <button @click="open = !open" 
                    class="flex items-center gap-3 px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50">
                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm font-semibold text-gray-600">
                    <span sec:authentication="principal.username" 
                          th:text="${#strings.substring(#authentication.name, 0, 1).toUpperCase()}">A</span>
                </div>
                <div class="text-left">
                    <div class="text-sm font-medium text-gray-900" sec:authentication="principal.username">Admin</div>
                    <div class="text-xs text-gray-500" sec:authentication="principal.authorities">Role</div>
                </div>
                <i class="fas fa-chevron-down text-xs text-gray-400"></i>
            </button>
            
            <!-- Dropdown Menu -->
            <div x-show="open" @click.away="open = false" x-cloak
                 class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50">
                <a href="/profile" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">
                    <i class="fas fa-user w-4"></i> My Profile
                </a>
                <a href="/settings" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">
                    <i class="fas fa-cog w-4"></i> Settings
                </a>
                <hr class="my-2 border-gray-100">
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left">
                        <i class="fas fa-sign-out-alt w-4"></i> Logout
                    </button>
                </form>
            </div>
        </div>
    </div>
</header>

<style>
    [x-cloak] { display: none !important; }
</style>
</body>
</html>